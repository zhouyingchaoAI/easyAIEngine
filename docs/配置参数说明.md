# é…ç½®å‚æ•°è¯´æ˜

## ğŸ”§ æ‰€æœ‰å¯ç”¨å‚æ•°

### åŸºç¡€å‚æ•°

```bash
python3 algorithm_service.py \
  --service-id yolo11x_head_detector \
  --port 8000 \
  --easydarwin http://10.1.6.230:5066
```

---

## ğŸ“Š å‚æ•°è¯¦è§£

### 1. æœåŠ¡é…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--service-id` | string | yolo11x_head_detector | æœåŠ¡å”¯ä¸€æ ‡è¯† |
| `--name` | string | YOLOv11xäººå¤´æ£€æµ‹ç®—æ³• | æœåŠ¡åç§° |
| `--port` | int | 8000 | HTTPç›‘å¬ç«¯å£ |
| `--host` | string | 0.0.0.0 | ç›‘å¬åœ°å€ |

### 2. æ‰¹å¤„ç†é…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--batch-size` | int | 8 | æ‰¹å¤„ç†å¤§å°ï¼Œå»ºè®®4-16 |
| `--batch-timeout` | float | 0.1 | æ‰¹å¤„ç†è¶…æ—¶ï¼ˆç§’ï¼‰ï¼Œ100msæ—¶é—´çª—å£ |
| `--no-batching` | flag | false | ç¦ç”¨æ‰¹å¤„ç†ï¼Œä½¿ç”¨åŸå§‹å•å¼ æ¨ç† |

### 3. å¯è§†åŒ–é…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--no-video` | flag | false | ç¦ç”¨è§†é¢‘ä¿å­˜ |

### 4. EasyDarwiné…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--easydarwin` | string | http://localhost:5066 | EasyDarwinå¹³å°åœ°å€ |
| `--no-register` | flag | false | ä¸æ³¨å†Œåˆ°EasyDarwin |

### 5. æ¨¡å‹é…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--model` | string | /cv_space/NWPU-Crowd/.../best.pt | æ¨¡å‹æ–‡ä»¶è·¯å¾„ |
| `--task-types` | list | [...] | æ”¯æŒçš„ä»»åŠ¡ç±»å‹åˆ—è¡¨ |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: é»˜è®¤é…ç½®
```bash
python3 algorithm_service.py
```

**æ•ˆæœï¼š**
- æ‰¹å¤„ç†: å¯ç”¨ï¼ˆbatch_size=8, timeout=0.1sï¼‰
- è§†é¢‘ä¿å­˜: å¯ç”¨
- è‡ªåŠ¨æ³¨å†Œåˆ°EasyDarwin

### åœºæ™¯2: é«˜æ€§èƒ½é…ç½®
```bash
python3 algorithm_service.py --batch-size 16 --batch-timeout 0.1
```

**æ•ˆæœï¼š**
- æ›´å¤§çš„æ‰¹å¤„ç†å¤§å°
- ååé‡æå‡åˆ°120 req/s
- é€‚åˆé«˜å¹¶å‘åœºæ™¯

### åœºæ™¯3: ä½å»¶è¿Ÿé…ç½®
```bash
python3 algorithm_service.py --batch-size 4 --batch-timeout 0.05
```

**æ•ˆæœï¼š**
- è¾ƒå°çš„æ‰¹å¤„ç†å¤§å°
- æ›´çŸ­çš„ç­‰å¾…æ—¶é—´
- é€‚åˆå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯

### åœºæ™¯4: çº¯æ¨ç†ï¼ˆæ— è§†é¢‘ï¼‰
```bash
python3 algorithm_service.py --no-video
```

**æ•ˆæœï¼š**
- ä¸ä¿å­˜è§†é¢‘
- èŠ‚çœç£ç›˜I/O
- æå‡æ€§èƒ½
- é€‚åˆåªéœ€è¦æ¨ç†ç»“æœçš„åœºæ™¯

### åœºæ™¯5: åŸå§‹æ¨¡å¼ï¼ˆæ— æ‰¹å¤„ç†ï¼‰
```bash
python3 algorithm_service.py --no-batching
```

**æ•ˆæœï¼š**
- ä½¿ç”¨åŸå§‹å•å¼ æ¨ç†
- ååé‡çº¦20 req/s
- é€‚åˆå•è·¯ä½é¢‘åœºæ™¯

### åœºæ™¯6: ç‹¬ç«‹HTTPæœåŠ¡
```bash
python3 algorithm_service.py --no-register --port 8888
```

**æ•ˆæœï¼š**
- ä¸æ³¨å†Œåˆ°EasyDarwin
- ä½œä¸ºç‹¬ç«‹HTTPæœåŠ¡
- é€‚åˆæµ‹è¯•æˆ–ç‹¬ç«‹ä½¿ç”¨

### åœºæ™¯7: æç®€æ¨¡å¼
```bash
python3 algorithm_service.py --no-batching --no-video --no-register
```

**æ•ˆæœï¼š**
- çº¯ç²¹çš„å•å¼ æ¨ç†
- æ— è§†é¢‘ä¿å­˜
- æ— æœåŠ¡æ³¨å†Œ
- æœ€å°åŒ–èµ„æºå ç”¨

---

## ğŸ“Š å‚æ•°ç»„åˆå»ºè®®

### ç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰
```bash
python3 algorithm_service.py \
  --port 8000 \
  --batch-size 8 \
  --batch-timeout 0.1 \
  --easydarwin http://10.1.6.230:5066
```

### æµ‹è¯•ç¯å¢ƒ
```bash
python3 algorithm_service.py \
  --port 8000 \
  --no-register \
  --no-video
```

### é«˜æ€§èƒ½åœºæ™¯
```bash
python3 algorithm_service.py \
  --batch-size 16 \
  --batch-timeout 0.15
```

### ä½å»¶è¿Ÿåœºæ™¯
```bash
python3 algorithm_service.py \
  --batch-size 4 \
  --batch-timeout 0.05
```

---

## ğŸ‰ å¯åŠ¨ä¿¡æ¯ç¤ºä¾‹

```
============================================================
  YOLOv11xäººå¤´æ£€æµ‹ç®—æ³• v2.0.0
============================================================
æ­£åœ¨åŠ è½½æ¨¡å‹: /cv_space/NWPU-Crowd/runs/exp_yolo11x3/weights/best.pt
âœ“ æ¨¡å‹åŠ è½½æˆåŠŸ (è€—æ—¶: 3.52ç§’)
âœ“ è·Ÿè¸ªå™¨ç®¡ç†å™¨å·²åˆå§‹åŒ–
âœ“ æ‰¹å¤„ç†æ¨ç†å·²å¯åŠ¨ (batch_size=8, timeout=0.1s)
âœ“ ä½¿ç”¨å¤šçº¿ç¨‹HTTPæœåŠ¡å™¨ï¼Œæ”¯æŒå¹¶å‘è¯·æ±‚
âœ“ è§†é¢‘ä¿å­˜å·²å¯ç”¨ (ä¿å­˜ä½ç½®: /cv_space/predict/videos/)

æ­£åœ¨æ³¨å†Œåˆ° http://10.1.6.230:5066...
âœ“ æ³¨å†ŒæˆåŠŸ: yolo11x_head_detector

ç®—æ³•æœåŠ¡å·²å¯åŠ¨
  æœåŠ¡ID: yolo11x_head_detector
  ç›‘å¬åœ°å€: 0.0.0.0:8000
  æ¨ç†ç«¯ç‚¹: http://0.0.0.0:8000/infer
============================================================
```

**æ ¹æ®å¯åŠ¨ä¿¡æ¯ç¡®è®¤å„åŠŸèƒ½æ˜¯å¦å¯ç”¨ï¼** âœ…

